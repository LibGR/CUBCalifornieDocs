{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Documentation de l'agence CUB Californie","text":"<p>Bienvenue sur la documentation CUB de Californie produite en Markdown et avec Mkdocs...</p>"},{"location":"Autre%20%28EPOKA%29/Configurations/SwitchLv2/","title":"Configuration du SwitchLv2","text":"<pre><code>version 15.0\nno service pad\nservice timestamps debug datetime msec\nservice timestamps log datetime msec\nno service password-encryption\n!\nhostname SwitchLv2EPOKA\n!\nboot-start-marker\nboot-end-marker\n!\n!\nno aaa new-model\nsystem mtu routing 1500\n!\n!\n!\n!\ncrypto pki trustpoint TP-self-signed-2716685696\n enrollment selfsigned\n subject-name cn=IOS-Self-Signed-Certificate-2716685696\n revocation-check none\n rsakeypair TP-self-signed-2716685696\n!\n!\ncrypto pki certificate chain TP-self-signed-2716685696\n certificate self-signed 01\n  3082022B 30820194 A0030201 02020101 300D0609 2A864886 F70D0101 05050030 \n  31312F30 2D060355 04031326 494F532D 53656C66 2D536967 6E65642D 43657274 \n  69666963 6174652D 32373136 36383536 3936301E 170D3933 30333031 30303033 \n  35315A17 0D323030 31303130 30303030 305A3031 312F302D 06035504 03132649 \n  4F532D53 656C662D 5369676E 65642D43 65727469 66696361 74652D32 37313636 \n  38353639 3630819F 300D0609 2A864886 F70D0101 01050003 818D0030 81890281 \n  8100C044 BF2D9591 65E8C028 7FB691D5 FF719862 62ADEBB8 7ED0CD3C 12132BF9 \n  F745B2C0 DD0B0EC5 171B4C4B 28F755C7 DB7491CE 941256F1 271EBC4A 0C8BCF4C \n  A482B2EF 623D784C AEF1AD8A 2F487D27 F83F1CF9 D5A7FE41 F7E262C7 5AD04B5C \n  09A10134 12F5641D C975C5C5 C4AB1834 05EC8E6A 97869BDE CE1F4230 E8487D61 \n  458B0203 010001A3 53305130 0F060355 1D130101 FF040530 030101FF 301F0603 \n  551D2304 18301680 14FD5DE3 35B504EF B1C79B79 6FC6DD1F B603C95C D9301D06 \n  03551D0E 04160414 FD5DE335 B504EFB1 C79B796F C6DD1FB6 03C95CD9 300D0609 \n  2A864886 F70D0101 05050003 818100B9 DB2F1657 BD45479A B73D91F6 A27A6A19 \n  80962A86 AA89327D DD6CF777 62BA0370 CCE024DB 49CB4CB4 1836E27F 34B2B317 \n  C221FC83 11BCC742 40BA12EB A52DDC10 B4F1F223 A519B33F 91C11E40 59CFE3CB \n  91B44A56 FA1B0394 C56AF21F F08D01C8 6A6830C0 B4036269 86C5B43B 96F02899 \n  0E7D25F1 2E3B93A2 405B53D0 4A7E8C\n        quit\n!\n!\n!\n!\n!\nspanning-tree mode pvst\nspanning-tree extend system-id\n!\nvlan internal allocation policy ascending\n!\n!\n!\n!\n!\n!\ninterface FastEthernet0/1\n switchport access vlan 11\n switchport mode access\n!\ninterface FastEthernet0/2\n switchport access vlan 11\n switchport mode access\n!\ninterface FastEthernet0/3\n switchport access vlan 11\n switchport mode access\n!\ninterface FastEthernet0/4\n switchport access vlan 11\n switchport mode access\n!\ninterface FastEthernet0/5\n switchport access vlan 21\n switchport mode access\n!\ninterface FastEthernet0/6\n switchport access vlan 21\n switchport mode access\n!\ninterface FastEthernet0/7\n switchport access vlan 21\n switchport mode access\n!\ninterface FastEthernet0/8\n switchport access vlan 21\n switchport mode access\n!\ninterface FastEthernet0/9\n switchport access vlan 31\n switchport mode access\n!\ninterface FastEthernet0/10\n switchport access vlan 31\n switchport mode access\n!\ninterface FastEthernet0/11\n switchport access vlan 31\n switchport mode access\n!\ninterface FastEthernet0/12\n switchport access vlan 31\n switchport mode access\n!\ninterface FastEthernet0/13\n switchport access vlan 41\n switchport mode access\n!\ninterface FastEthernet0/14\n switchport access vlan 41\n switchport mode access\n!\ninterface FastEthernet0/15\n switchport access vlan 41\n switchport mode access\n!\ninterface FastEthernet0/16\n switchport access vlan 41\n switchport mode access\n!\ninterface FastEthernet0/17\n switchport access vlan 53\n switchport mode access\n!\ninterface FastEthernet0/18\n switchport access vlan 53\n switchport mode access\n!\ninterface FastEthernet0/19\n switchport access vlan 53\n switchport mode access\n!\ninterface FastEthernet0/20\n switchport access vlan 53\n switchport mode access\n!\ninterface FastEthernet0/21\n switchport access vlan 61\n switchport mode access\n!\ninterface FastEthernet0/22\n switchport access vlan 61\n switchport mode access\n!\ninterface FastEthernet0/23\n switchport access vlan 61\n switchport mode access\n!\ninterface FastEthernet0/24\n switchport access vlan 61\n switchport mode access\n!\ninterface FastEthernet0/25\n switchport access vlan 71\n switchport mode access\n!\ninterface FastEthernet0/26\n switchport access vlan 71\n switchport mode access\n!\ninterface FastEthernet0/27\n switchport access vlan 71\n switchport mode access\n!\ninterface FastEthernet0/28\n switchport access vlan 71\n switchport mode access\n!\ninterface FastEthernet0/29\n!\ninterface FastEthernet0/30\n!\ninterface FastEthernet0/31\n!\ninterface FastEthernet0/32\n!\ninterface FastEthernet0/33\n!\ninterface FastEthernet0/34\n!\ninterface FastEthernet0/35\n!\ninterface FastEthernet0/36\n!\ninterface FastEthernet0/37\n!\ninterface FastEthernet0/38\n!\ninterface FastEthernet0/39\n!\ninterface FastEthernet0/40\n!\ninterface FastEthernet0/41\n!\ninterface FastEthernet0/42\n!\ninterface FastEthernet0/43\n!\ninterface FastEthernet0/44\n!\ninterface FastEthernet0/45\n!\ninterface FastEthernet0/46\n!\ninterface FastEthernet0/47\n switchport trunk allowed vlan 11,21,31,41,53,61,71\n switchport mode trunk\n!\ninterface FastEthernet0/48\n!\ninterface GigabitEthernet0/1\n!\ninterface GigabitEthernet0/2\n!\ninterface Vlan1\n no ip address\n shutdown\n!\nip http server\nip http secure-server\n!\n!\nline con 0\nline vty 0 4\n login\nline vty 5 15\n login\n!\nend\n</code></pre>"},{"location":"Autre%20%28EPOKA%29/Configurations/SwitchLv3/","title":"Configuration du SwitchLv3","text":"<pre><code>version 17.6\nservice timestamps debug datetime msec                                          \nservice timestamps log datetime msec                                            \n! Call-home is enabled by Smart-Licensing.                                      \nservice call-home                                                               \nplatform punt-keepalive disable-kernel-core                                     \n!                                                                               \nhostname SwitchL3EPOKA                                                            \n!                                                                               \n!                                                                               \nvrf definition Mgmt-vrf                                                         \n !                                                                              \n address-family ipv4                                                            \n exit-address-family                                                            \n !                                                                              \n address-family ipv6                                                            \n exit-address-family                                                            \n!                                                                               \n!       \n!\n!\n!\nno aaa new-model\nswitch 1 provision c9200l-24t-4g\n!\n!\n!\n!\n!\n!\n!\n!\n!\nip routing\n!\n!\n!\n!\nlogin on-success log\n!\ncrypto pki trustpoint SLA-TrustPoint\n enrollment pkcs12\n revocation-check crl\n!\ncrypto pki trustpoint TP-self-signed-3639644206\n enrollment selfsigned\n subject-name cn=IOS-Self-Signed-Certificate-3639644206\n revocation-check none\n rsakeypair TP-self-signed-3639644206\n!\n!\ncrypto pki certificate chain SLA-TrustPoint\n certificate ca 01\n  30820321 30820209 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030 \n  32310E30 0C060355 040A1305 43697363 6F312030 1E060355 04031317 43697363 \n  6F204C69 63656E73 696E6720 526F6F74 20434130 1E170D31 33303533 30313934 \n  3834375A 170D3338 30353330 31393438 34375A30 32310E30 0C060355 040A1305 \n  43697363 6F312030 1E060355 04031317 43697363 6F204C69 63656E73 696E6720 \n  526F6F74 20434130 82012230 0D06092A 864886F7 0D010101 05000382 010F0030 \n  82010A02 82010100 A6BCBD96 131E05F7 145EA72C 2CD686E6 17222EA1 F1EFF64D \n  CBB4C798 212AA147 C655D8D7 9471380D 8711441E 1AAF071A 9CAE6388 8A38E520 \n  1C394D78 462EF239 C659F715 B98C0A59 5BBB5CBD 0CFEBEA3 700A8BF7 D8F256EE \n  4AA4E80D DB6FD1C9 60B1FD18 FFC69C96 6FA68957 A2617DE7 104FDC5F EA2956AC \n  7390A3EB 2B5436AD C847A2C5 DAB553EB 69A9A535 58E9F3E3 C0BD23CF 58BD7188 \n  68E69491 20F320E7 948E71D7 AE3BCC84 F10684C7 4BC8E00F 539BA42B 42C68BB7 \n  C7479096 B4CB2D62 EA2F505D C7B062A4 6811D95B E8250FC4 5D5D5FB8 8F27D191 \n  C55F0D76 61F9A4CD 3D992327 A8BB03BD 4E6D7069 7CBADF8B DF5F4368 95135E44 \n  DFC7C6CF 04DD7FD1 02030100 01A34230 40300E06 03551D0F 0101FF04 04030201 \n  06300F06 03551D13 0101FF04 05300301 01FF301D 0603551D 0E041604 1449DC85 \n  4B3D31E5 1B3E6A17 606AF333 3D3B4C73 E8300D06 092A8648 86F70D01 010B0500 \n  03820101 00507F24 D3932A66 86025D9F E838AE5C 6D4DF6B0 49631C78 240DA905 \n  604EDCDE FF4FED2B 77FC460E CD636FDB DD44681E 3A5673AB 9093D3B1 6C9E3D8B \n  D98987BF E40CBD9E 1AECA0C2 2189BB5C 8FA85686 CD98B646 5575B146 8DFC66A8 \n  467A3DF4 4D565700 6ADF0F0D CF835015 3C04FF7C 21E878AC 11BA9CD2 55A9232C \n  7CA7B7E6 C1AF74F6 152E99B7 B1FCF9BB E973DE7F 5BDDEB86 C71E3B49 1765308B \n  5FB0DA06 B92AFE7F 494E8A9E 07B85737 F3A58BE1 1A48A229 C37C1E69 39F08678 \n  80DDCD16 D6BACECA EEBC7CF9 8428787B 35202CDC 60E4616A B623CDBD 230E3AFB \n  418616A9 4093E049 4D10AB75 27E86F73 932E35B5 8862FDAE 0275156F 719BB2F0 \n  D697DF7F 28\n        quit\ncrypto pki certificate chain TP-self-signed-3639644206\n certificate self-signed 01\n  30820330 30820218 A0030201 02020101 300D0609 2A864886 F70D0101 05050030 \n  31312F30 2D060355 04031326 494F532D 53656C66 2D536967 6E65642D 43657274 \n  69666963 6174652D 33363339 36343432 3036301E 170D3235 31303036 30373533 \n  32375A17 0D333531 30303630 37353332 375A3031 312F302D 06035504 03132649 \n  4F532D53 656C662D 5369676E 65642D43 65727469 66696361 74652D33 36333936 \n  34343230 36308201 22300D06 092A8648 86F70D01 01010500 0382010F 00308201 \n  0A028201 0100E33A D2038552 1469DD99 F7C92E05 00C9D626 F69E9F25 DC400598 \n  99EF55FD 39EB27B5 1D2FF594 1DCCDE79 1A619E7B DE7054D4 0A73096A 09BA3EBF \n  8F3EC86D FD2F0198 7125C09D 3D293E84 2CE63604 C82A8A84 E559CAE6 7A5CFD9B \n  5F455E27 E20F5E0A 4F4EA6DF B6ADA130 D4BD2A65 BEA76744 9F7930A1 4797A21E \n  06AA07BB 28E0D8E6 0EB01D90 352F27B8 07100AF8 ED8E0769 3F58324D 74949718 \n  C6068B02 67DB5F6D 50ECD54B 41ECDACB 01CB8070 122B3E62 1F64C86D CAC92C14 \n  503D11DD C071586B 9EE8AB07 800E3A44 A1190AD7 73C481DD 23864EA9 AC89BBBD \n  AC48DD5E 1E7C7654 407106A6 023CEB35 6A4493A2 B5858D5B 339399C9 BAC17D5F \n  BEA318EA 0F8D0203 010001A3 53305130 0F060355 1D130101 FF040530 030101FF \n  301F0603 551D2304 18301680 140A57EC 085F21AB BFB80243 218C6C44 E457AB4B \n  47301D06 03551D0E 04160414 0A57EC08 5F21ABBF B8024321 8C6C44E4 57AB4B47 \n  300D0609 2A864886 F70D0101 05050003 82010100 8087F15B 8FF27274 8F2DDD80 \n  95131276 651346E2 8FE0FCCD D8A2B7E7 AB940406 1FFE11D8 A6B4D6A2 1C03318A \n  C192BB9C B5193A9F BE3E88EA F27275CC 95C27A48 F32BDD35 4196BB90 DAAE9D09 \n  564540A2 16369BF7 F83C335B E6CD6BFD E5642315 27D5DE86 3E57FCF6 215188F6 \n  907745E5 C5451637 1A5AE539 CDE6C6AD E8946F15 2B2D08E2 A32C30ED 181F5496 \n  D9EB60E5 18C3A215 1489E357 E976A260 77E02715 17FE7F58 8C191B7A 5056D0FC \n  53355331 BF2B8C6A 5CDE1BC6 30A9746B 4BDDAF30 7CEF4790 0D7167AB ACAD5044 \n  EE7D4557 A12A2184 563EFC0A A3A0CE08 74ECEE24 AA49F59A EE93E9B2 F052E774 \n  ACA9EC7D FC914EE1 B3F6652D 533BEB2A D414BE6A\n        quit\n!\nlicense boot level network-essentials addon dna-essentials\n!\n!\ndiagnostic bootup level minimal\n!\nspanning-tree mode rapid-pvst\nspanning-tree extend system-id\nmemory free low-watermark processor 10626\n!\n!\nredundancy\n mode sso\n!\n!\ntransceiver type all\n monitoring\n!\n!\nclass-map match-any system-cpp-police-ewlc-control\n  description EWLC Control \nclass-map match-any system-cpp-police-topology-control\n  description Topology control\nclass-map match-any system-cpp-police-sw-forward\n  description Sw forwarding, L2 LVX data packets, LOGGING, Transit Traffic\nclass-map match-any system-cpp-default\n  description EWLC data, Inter FED Traffic \nclass-map match-any system-cpp-police-sys-data\n  description Openflow, Exception, EGR Exception, NFL Sampled Data, RPF Failed\nclass-map match-any system-cpp-police-punt-webauth\n  description Punt Webauth\nclass-map match-any system-cpp-police-l2lvx-control\n  description L2 LVX control packets\nclass-map match-any system-cpp-police-forus\n  description Forus Address resolution and Forus traffic\nclass-map match-any system-cpp-police-multicast-end-station\n  description MCAST END STATION\nclass-map match-any system-cpp-police-high-rate-app\n  description High Rate Applications \nclass-map match-any system-cpp-police-multicast\n  description MCAST Data\nclass-map match-any system-cpp-police-l2-control\n  description L2 control\nclass-map match-any system-cpp-police-dot1x-auth\n  description DOT1X Auth\nclass-map match-any system-cpp-police-data\n  description ICMP redirect, ICMP_GEN and BROADCAST\nclass-map match-any system-cpp-police-stackwise-virt-control\n  description Stackwise Virtual OOB\nclass-map match-any non-client-nrt-class\nclass-map match-any system-cpp-police-routing-control\n  description Routing control and Low Latency\nclass-map match-any system-cpp-police-protocol-snooping\n  description Protocol snooping\nclass-map match-any system-cpp-police-dhcp-snooping\n  description DHCP snooping\nclass-map match-any system-cpp-police-ios-routing\n  description L2 control, Topology control, Routing control, Low Latency\nclass-map match-any system-cpp-police-system-critical\n  description System Critical and Gold Pkt\nclass-map match-any system-cpp-police-ios-feature\n  description ICMPGEN,BROADCAST,ICMP,L2LVXCntrl,ProtoSnoop,PuntWebauth,MCASTData,Transit,DOT1XAuth,Swfwd,LOGGING,L2LVXData,ForusTraffic,ForusARP,McastEndStn,Openflow,Exception,EGRExcption,NflSampled,RpfFailed\n!\npolicy-map system-cpp-policy\n!\n! \n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\ninterface GigabitEthernet0/0\n vrf forwarding Mgmt-vrf\n no ip address\n shutdown\n!\ninterface GigabitEthernet1/0/1\n switchport access vlan 11\n switchport mode access\n!\ninterface GigabitEthernet1/0/2\n switchport access vlan 21\n switchport mode access\n!\ninterface GigabitEthernet1/0/3\n switchport access vlan 31\n switchport mode access\n!\ninterface GigabitEthernet1/0/4\n switchport access vlan 41\n switchport mode access\n!\ninterface GigabitEthernet1/0/5\n switchport access vlan 53\n switchport mode access\n!\ninterface GigabitEthernet1/0/6\n switchport access vlan 61\n switchport mode access\n!\ninterface GigabitEthernet1/0/7\n switchport access vlan 71\n switchport mode access\n!\ninterface GigabitEthernet1/0/8\n switchport access vlan 54\n switchport mode access\n!\ninterface GigabitEthernet1/0/9\n!\ninterface GigabitEthernet1/0/10\n!\ninterface GigabitEthernet1/0/11\n!\ninterface GigabitEthernet1/0/12\n!\ninterface GigabitEthernet1/0/13\n!         \ninterface GigabitEthernet1/0/14\n!\ninterface GigabitEthernet1/0/15\n!\ninterface GigabitEthernet1/0/16\n!\ninterface GigabitEthernet1/0/17\n!\ninterface GigabitEthernet1/0/18\n!\ninterface GigabitEthernet1/0/19\n!\ninterface GigabitEthernet1/0/20\n!\ninterface GigabitEthernet1/0/21\n!\ninterface GigabitEthernet1/0/22\n!\ninterface GigabitEthernet1/0/23\n!\ninterface GigabitEthernet1/0/24\n switchport trunk allowed vlan 11,21,31,41,53,61,71\n switchport mode trunk\n!\ninterface GigabitEthernet1/1/1\n!\ninterface GigabitEthernet1/1/2\n!\ninterface GigabitEthernet1/1/3\n!\ninterface GigabitEthernet1/1/4\n!\ninterface Vlan1\n no ip address\n shutdown\n!\ninterface Vlan11\n ip address 192.168.3.65 255.255.255.224\n ip helper-address 172.16.53.2\n!\ninterface Vlan21\n ip address 192.168.3.161 255.255.255.224\n ip helper-address 172.16.53.2\n!\ninterface Vlan31\n ip address 192.168.3.193 255.255.255.224\n ip helper-address 172.16.53.2\n!\ninterface Vlan33\n no ip address\n!\ninterface Vlan41\n ip address 192.168.3.225 255.255.255.240\n ip helper-address 172.16.53.2\n!\ninterface Vlan53\n ip address 172.16.53.253 255.255.255.0\n ip helper-address 172.16.53.2\n!\ninterface Vlan54\n ip address 192.168.33.253 255.255.255.240\n!\ninterface Vlan61\n ip address 192.168.3.1 255.255.255.192\n ip helper-address 172.16.53.2\n!\ninterface Vlan71\n ip address 192.168.3.129 255.255.255.224\n ip helper-address 172.16.53.2\n!\nip forward-protocol nd\nip http server\nip http authentication local\nip http secure-server\nip route 0.0.0.0 0.0.0.0 192.168.33.254\n!\n!\n!\n!\ncontrol-plane\n service-policy input system-cpp-policy\n!\n!\nline con 0\n stopbits 1\nline aux 0\nline vty 0 4\n login\n transport input ssh\nline vty 5 15\n login\n transport input ssh\n!\ncall-home\n ! If contact email address in call-home is configured as sch-smart-licensing@cisco.com\n ! the email address configured in Cisco Smart License Portal will be used as contact email address to send SCH notifications.\n contact-email-addr sch-smart-licensing@cisco.com\n profile \"CiscoTAC-1\"\n  active\n  destination transport-method http\n!\n!\n!\n!\n!\n!\nend\n</code></pre>"},{"location":"Documentations/Linux/TOTP/","title":"SSH s\u00e9curis\u00e9 via TOTP","text":""},{"location":"Documentations/Linux/TOTP/#1-mise-a-jour-du-systeme","title":"1. Mise \u00e0 jour du syst\u00e8me","text":"<p>Avant de commencer, assurez-vous que votre syst\u00e8me est \u00e0 jour :</p> <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre>"},{"location":"Documentations/Linux/TOTP/#2-nettoyer-lancienne-configuration","title":"2. Nettoyer l\u2019ancienne configuration","text":"<p>Supprimez l\u2019ancien fichier de secrets s\u2019il existe :</p> <pre><code>sudo rm -f /etc/security/users.oath\n</code></pre>"},{"location":"Documentations/Linux/TOTP/#3-installer-les-outils-necessaires","title":"3. Installer les outils n\u00e9cessaires","text":"<pre><code>sudo apt install -y libpam-oath oathtool openssh-server qrencode\n</code></pre> <p>Description des paquets :</p> <ul> <li>libpam-oath : permet l\u2019authentification OTP via PAM</li> <li>oathtool : g\u00e9n\u00e8re et v\u00e9rifie les codes OTP</li> <li>qrencode : cr\u00e9e un QR code pour l\u2019application d\u2019authentification</li> </ul> <p>Information</p> <p>Qrencode doit \u00eatre utilis\u00e9 sur une machine poss\u00e9dant une interface graphique. Pas forc\u00e9ment le serveur.</p>"},{"location":"Documentations/Linux/TOTP/#4-creer-un-nouveau-secret-pour-lutilisateur-etudiant","title":"4. Cr\u00e9er un nouveau secret pour l\u2019utilisateur \"etudiant\"","text":"<pre><code>sudo -i\nopenssl rand -hex 20 &gt; /etc/security/users.oath\necho \"HOTP/T30/6 etudiant - $(cat /etc/security/users.oath)\" &gt; /etc/security/users.oath\n</code></pre>"},{"location":"Documentations/Linux/TOTP/#5-securiser-le-fichier-de-secrets","title":"5. S\u00e9curiser le fichier de secrets","text":"<pre><code>sudo chown root:root /etc/security/users.oath\nsudo chmod 600 /etc/security/users.oath\n</code></pre>"},{"location":"Documentations/Linux/TOTP/#6-configurer-pam-pour-ssh","title":"6. Configurer PAM pour SSH","text":"<p>\u00c9ditez le fichier PAM de SSH :</p> <pre><code>sudo nano /etc/pam.d/sshd\n</code></pre> <p>Ajoutez ou modifiez les lignes suivantes :</p> <pre><code>#@include common-auth\n\nauth required pam_unix.so nullok_secure\nauth required pam_oath.so usersfile=/etc/security/users.oath window=30 digits=6\n</code></pre> <p>Bastion</p> <p>Pour exclure un utilisateur du syst\u00e8me TOTP, ajoutez cette ligne avant les pr\u00e9c\u00e9dentes :</p> <pre><code>auth [success=1 default=ignore] pam_succeed_if.so user = adminbastion\n</code></pre> <p>S\u00e9curit\u00e9</p> <p>Cet utilisateur pourra donc se connecter sans TOTP, il faut donc le s\u00e9curis\u00e9 avec un mot de passe fort ou une clef SSH.</p>"},{"location":"Documentations/Linux/TOTP/#7-configurer-ssh-pour-utiliser-totp","title":"7. Configurer SSH pour utiliser TOTP","text":"<p>\u00c9ditez le fichier de configuration SSH :</p> <pre><code>sudo nano /etc/ssh/sshd_config\n</code></pre> <p>Modifiez ou ajoutez ces lignes :</p> <pre><code>#KbdInteractiveAuthentication no\n\nChallengeResponseAuthentication yes\nUsePAM yes\n</code></pre> <p>Red\u00e9marrez ensuite le service SSH :</p> <pre><code>sudo systemctl restart ssh\n</code></pre>"},{"location":"Documentations/Linux/TOTP/#8-recuperer-la-cle-otp-pour-lapplication","title":"8. R\u00e9cup\u00e9rer la cl\u00e9 OTP pour l\u2019application","text":"<pre><code>grep etudiant /etc/security/users.oath | awk '{print $4}' | oathtool -v -d 6 -\n</code></pre> <ul> <li>Cette commande permet de v\u00e9rifier que le code OTP fonctionne correctement.</li> </ul>"},{"location":"Documentations/Linux/TOTP/#9-generer-un-qr-code-a-scanner","title":"9. G\u00e9n\u00e9rer un QR code \u00e0 scanner","text":"<p>Remplacez <code>TA_CLE_BASE32</code> par la cl\u00e9 affich\u00e9e pr\u00e9c\u00e9demment :</p> <pre><code>qrencode -o etudiant.png \"otpauth://totp/etudiant@IP_DU_SERVEUR?secret=TA_CLE_BASE32\"\n</code></pre> <ul> <li>Scannez le QR code avec une application OTP comme Google Authenticator ou FreeOTP.</li> </ul>"},{"location":"Documentations/Linux/TOTP/#10-verifier-la-synchronisation-de-lheure","title":"10. V\u00e9rifier la synchronisation de l\u2019heure","text":"<pre><code>timedatectl\nsudo apt install -y systemd-timesyncd\nsudo systemctl enable --now systemd-timesyncd\n</code></pre> <p>D\u00e9syncronisation</p> <p>Les OTP d\u00e9pendent de l\u2019heure : v\u00e9rifiez que le serveur et votre t\u00e9l\u00e9phone sont bien synchronis\u00e9s.</p>"},{"location":"Documentations/Linux/TOTP/#11-tester-la-connexion-ssh","title":"11. Tester la connexion SSH","text":"<pre><code>ssh etudiant@192.168.1.90\n</code></pre> <ul> <li>Vous serez invit\u00e9 \u00e0 saisir votre mot de passe puis le code OTP affich\u00e9 dans votre application d\u2019authentification.</li> </ul>"},{"location":"Documentations/Linux/etckeeper/","title":"Versionning de <code>/etc</code> avec Etckeeper","text":""},{"location":"Documentations/Linux/etckeeper/#1-mettre-a-jour-le-systeme","title":"1. Mettre \u00e0 jour le syst\u00e8me","text":"<p>Avant toute installation, assurez-vous que le syst\u00e8me est \u00e0 jour :</p> <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre>"},{"location":"Documentations/Linux/etckeeper/#2-installer-etckeeper","title":"2. Installer Etckeeper","text":"<pre><code>sudo apt install -y etckeeper\netckeeper --version\n</code></pre> <ul> <li>V\u00e9rifie que etckeeper est install\u00e9 correctement et affiche sa version.</li> </ul>"},{"location":"Documentations/Linux/etckeeper/#3-configurer-etckeeper","title":"3. Configurer Etckeeper","text":"<p>\u00c9ditez le fichier de configuration :</p> <pre><code>sudo nano /etc/etckeeper/etckeeper.conf\n</code></pre> <ul> <li>Assurez-vous que Git est utilis\u00e9 :</li> </ul> <pre><code>VCS=\"git\"\n</code></pre> <ul> <li>Pour conserver les m\u00e9tadonn\u00e9es des fichiers :</li> </ul> <pre><code>PRESERVE_METADATA=\"yes\"\n</code></pre> <p>Important</p> <p>\u00c0 chaque modification apport\u00e9e dans <code>/etc</code>, ex\u00e9cutez :</p> <pre><code>sudo etckeeper commit \"Description du changement\"\n</code></pre> <ul> <li>Cela enregistre automatiquement vos changements dans le d\u00e9p\u00f4t Git local.</li> </ul>"},{"location":"Documentations/Linux/etckeeper/#4-initialiser-git-pour-etc","title":"4. Initialiser Git pour <code>/etc</code>","text":"<pre><code>sudo etckeeper init\nsudo etckeeper commit \"Commit initial pour /etc\"\n</code></pre> <ul> <li>Cr\u00e9e un d\u00e9p\u00f4t Git dans <code>/etc</code> et effectue un premier commit pour sauvegarder l\u2019\u00e9tat initial.</li> </ul>"},{"location":"Documentations/Linux/etckeeper/#exemples-dutilisation","title":"Exemples d\u2019utilisation","text":""},{"location":"Documentations/Linux/etckeeper/#a-suivi-automatique-des-changements-avec-apt","title":"a) Suivi automatique des changements avec APT","text":"<p>Lors de l\u2019installation ou suppression de paquets, Etckeeper peut suivre les modifications dans <code>/etc</code>. Exemple :</p> <pre><code>sudo apt install -y nginx\ncd /etc\nsudo git log --oneline\n</code></pre> <ul> <li>Apr\u00e8s chaque installation ou modification manuelle, utilisez :</li> </ul> <pre><code>sudo etckeeper commit \"Installation de nginx\"\n</code></pre>"},{"location":"Documentations/Linux/etckeeper/#b-sauvegarde-de-etc","title":"b) Sauvegarde de <code>/etc</code>","text":"<p>Pour cr\u00e9er une sauvegarde compl\u00e8te :</p> <pre><code>sudo tar czf etc-backup.tar.gz /etc\n</code></pre>"},{"location":"Documentations/Linux/etckeeper/#c-restauration-de-etc","title":"c) Restauration de <code>/etc</code>","text":"<p>Pour restaurer \u00e0 partir d\u2019une sauvegarde :</p> <pre><code>sudo tar xzf etc-backup.tar.gz -C /\ncd /etc\nsudo git log --oneline\n</code></pre> <ul> <li>Permet de revenir \u00e0 un \u00e9tat pr\u00e9c\u00e9dent ou de v\u00e9rifier l\u2019historique des modifications.</li> </ul>"},{"location":"Documentations/Linux/web/","title":"Installation serveur WEB","text":""},{"location":"Documentations/Linux/web/#mise-a-jour-de-packet-tracer","title":"Mise \u00e0 jour de Packet Tracer","text":"<p> T\u00e9l\u00e9charger </p>"},{"location":"Documentations/Linux/web/#configuration-des-serveurs","title":"Configuration des serveurs :","text":""},{"location":"Documentations/Linux/web/#mise-a-jour-du-systeme-et-installation-des-paquets-necessaires","title":"Mise \u00e0 jour du syst\u00e8me et installation des paquets n\u00e9cessaires","text":"<pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\nsudo apt install zip apache2 php mariadb-server php-mysql libapache2-mod-php\n</code></pre>"},{"location":"Documentations/Linux/web/#configuration-du-virtualhost-wordpress","title":"Configuration du VirtualHost WordPress","text":"<pre><code>sudoedit /etc/apache2/sites-available/wp.conf\n</code></pre> <pre><code>&lt;VirtualHost  *:80&gt;\n    ServerName www1.californie.cub.sioplc.fr\n    DocumentRoot /var/www/wp        \n    DirectoryIndex index.php\n    &lt;Directory \"/var/www/wp\"&gt;\n          Options -Indexes \n          AllowOverride All\n          Require all granted\n    &lt;/Directory&gt;\n    ErrorLog ${APACHE_LOG_DIR}/error-wp.log\n    LogLevel warn\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/Virtualhost&gt;\n</code></pre>"},{"location":"Documentations/Linux/web/#desactivation-de-la-configuration-par-defaut-et-activation-du-site-wordpress","title":"D\u00e9sactivation de la configuration par d\u00e9faut et activation du site WordPress","text":"<pre><code>sudo a2dissite 000-default.conf\nsudo a2ensite wp.conf \nsudo systemctl reload apache2.service\n</code></pre>"},{"location":"Documentations/Linux/web/#configuration-dns-bind9","title":"Configuration DNS (Bind9)","text":""},{"location":"Documentations/Linux/web/#ajout-des-enregistrements-a","title":"Ajout des enregistrements A :","text":"<pre><code>sudo nano /var/cache/bind/db.californie.cub.sioplc.fr\n</code></pre> <pre><code>@   IN  SOA ns0.californie.cub.sioplc.fr. admin.californie.cub.sioplc.fr. (\n    2025110602  ; Serial\n        1D  ; Refresh\n        1H  ; Retry\n        1W  ; Expire\n        3H )    ; Negative Cache TTL\n\n; D\u00e9claration des serveurs DNS faisant autorit\u00e9 sur la zone tours.tierslieux86.fr \u00e0 l\u2019aide de\n; l\u2019enregistrement NS.\n\ncalifornie.cub.sioplc.fr.  IN  NS  ns0.californie.cub.sioplc.fr.\ncalifornie.cub.sioplc.fr.  IN  NS  ns1.californie.cub.sioplc.fr.\n\n; D\u00e9claration des correspondances entre un nom de domaine et une adresse IP \u00e0 l\u2019aide de l\n; \u2019enregistrement A. Il est indispensable de d\u00e9clarer les correspondances pour les serveurs DNS (nsx).\n\nns0     IN  A   192.168.3.10\nns1     IN  A   192.168.3.11\nwww0    IN  A   192.36.3.20\nwww1    IN  A   192.36.3.21\n</code></pre>"},{"location":"Documentations/Linux/web/#redemarrage","title":"Red\u00e9marrage :","text":"<pre><code>sudo systemctl restart bind9\n</code></pre>"},{"location":"Documentations/Linux/web/#installation-de-wordpress","title":"Installation de WordPress","text":"<pre><code>cd /tmp\nwget https://wordpress.org/latest.zip\n</code></pre>"},{"location":"Documentations/Linux/web/#creation-de-la-base-de-donnees","title":"Cr\u00e9ation de la base de donn\u00e9es","text":"<pre><code>sudo mysql\nCREATE DATABASE wp_www0_californie_cub;\nCREATE USER 'etudiant'@'localhost' IDENTIFIED BY 'etudiant_007';\nGRANT ALL PRIVILEGES ON wp_www0_californie_cub.* TO etudiant@localhost;\nFLUSH PRIVILEGES;\n</code></pre>"},{"location":"Documentations/Linux/web/#deploiement-des-fichiers-wordpress","title":"D\u00e9ploiement des fichiers WordPress","text":"<pre><code>sudo unzip latest.zip -d /var/www/wp\ncd /var/www/wp\nsudo mv wordpress/* /var/www/wp/\nsudo rm wordpress/ -Rf\nsudo chown -R www-data:www-data /var/www/wp/\n</code></pre>"},{"location":"Documentations/Linux/web/#installation-web-interface-wordpress","title":"Installation Web (interface WordPress)","text":"<p>Aller sur votre serveur, ici http://192.36.3.21 :</p>"},{"location":"Documentations/Linux/web/#choisir-votre-langue","title":"Choisir votre langue :","text":""},{"location":"Documentations/Linux/web/#pre-requis-base-de-donnees","title":"Pr\u00e9-requis base de donn\u00e9es","text":""},{"location":"Documentations/Linux/web/#informations-de-connexion-bd","title":"Informations de connexion BD","text":""},{"location":"Documentations/Linux/web/#confirmation-reussite","title":"Confirmation r\u00e9ussite","text":""},{"location":"Documentations/Linux/web/#creation-du-compte-admin","title":"Cr\u00e9ation du compte admin","text":""},{"location":"Documentations/Linux/web/#confirmation-installation","title":"Confirmation installation","text":""},{"location":"Documentations/Linux/web/#connexion-administration-wordpress","title":"Connexion administration WordPress","text":""},{"location":"Documentations/Linux/web/#mise-a-jour-de-lurl-du-site-dans-les-reglages-wordpress","title":"Mise \u00e0 jour de l\u2019URL du site dans les r\u00e9glages WordPress","text":""},{"location":"Documentations/Linux/web/#le-site-fonctionne","title":"Le site fonctionne :","text":""},{"location":"Documentations/Linux/web/#installation-du-scanner","title":"Installation du scanner","text":""},{"location":"Documentations/Linux/web/#ajout-des-cname-dans-bind9","title":"Ajout des CNAME dans Bind9","text":"<pre><code>@   IN  SOA ns0.californie.cub.sioplc.fr. admin.californie.cub.sioplc.fr. (\n    2025111301  ; Serial\n        1D  ; Refresh\n        1H  ; Retry\n        1W  ; Expire\n        3H )    ; Negative Cache TTL\n\n; D\u00e9claration des serveurs DNS faisant autorit\u00e9 sur la zone tours.tierslieux86.fr \u00e0 l\u2019aide de\n; l\u2019enregistrement NS.\n\ncalifornie.cub.sioplc.fr.  IN  NS  ns0.californie.cub.sioplc.fr.\ncalifornie.cub.sioplc.fr.  IN  NS  ns1.californie.cub.sioplc.fr.\n\n; D\u00e9claration des correspondances entre un nom de domaine et une adresse IP \u00e0 l\u2019aide de l\n; \u2019enregistrement A. Il est indispensable de d\u00e9clarer les correspondances pour les serveurs DNS (nsx).\n\nns0     IN  A   192.168.3.10\nns1     IN  A   192.168.3.11\nwww0    IN  A   192.36.3.20\nwww1    IN  A   192.36.3.21\n\nscanner0 IN  CNAME  www0\nscanner1 IN  CNAME  www1\n</code></pre>"},{"location":"Documentations/Linux/web/#verification","title":"V\u00e9rification","text":"<pre><code>dig scanner0.californie.cub.sioplc.fr\n</code></pre> <pre><code>; &lt;&lt;&gt;&gt; DiG 9.20.15 &lt;&lt;&gt;&gt; scanner0.californie.cub.sioplc.fr\n;; global options: +cmd\n;; Got answer:\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 22730\n;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 65494\n;; QUESTION SECTION:\n;scanner0.californie.cub.sioplc.fr. IN  A\n\n;; ANSWER SECTION:\nscanner0.californie.cub.sioplc.fr. 43200 IN CNAME www0.californie.cub.sioplc.fr.\nwww0.californie.cub.sioplc.fr. 39531 IN A       192.36.3.20\n\n;; Query time: 88 msec\n;; SERVER: 127.0.0.53#53(127.0.0.53) (UDP)\n;; WHEN: Thu Nov 13 10:43:10 CET 2025\n;; MSG SIZE  rcvd: 97\n</code></pre>"},{"location":"Documentations/Linux/web/#installation-du-scanner-web","title":"Installation du scanner web","text":"<pre><code>cd /var/www/\nsudo git clone https://github.com/kferrandonFulbert/command-attack.git\n</code></pre>"},{"location":"Documentations/Linux/web/#configuration-du-virtualhost-du-scanner","title":"Configuration du VirtualHost du scanner","text":"<pre><code>cd /etc/apache2/sites-available/\nsudo cp wp.conf scanner.conf\nsudo nano scanner.conf \n</code></pre> <pre><code>&lt;VirtualHost *:80&gt;\n    ServerName scanner1.californie.cub.sioplc.fr\n    DocumentRoot /var/www/command-attack\n    DirectoryIndex index.php\n\n    &lt;Directory \"/var/www/command-attack\"&gt;\n        Options -Indexes\n        AllowOverride All\n\n        # --- Restriction IP ---\n        &lt;RequireAll&gt;\n            Require ip 192.168.3.192/28\n\n            # --- Authentification Basic ---\n            AuthType Basic\n            AuthName \"Zone prot\u00e9g\u00e9e\"\n            AuthUserFile /etc/apache2/sites-available/scanner1.htpasswd\n            Require valid-user\n        &lt;/RequireAll&gt;\n    &lt;/Directory&gt;\n\n    ErrorLog ${APACHE_LOG_DIR}/error-wp.log\n    LogLevel warn\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\n</code></pre> <pre><code>sudo htpasswd -c /etc/apache2/sites-available/scanner1.htpasswd etudiant\nNew password: etudiant_007\nRe-type new password: \nAdding password for user etudiant\n</code></pre>"},{"location":"Documentations/Linux/web/#activation","title":"Activation :","text":"<pre><code>sudo a2ensite scanner.conf \nsudo systemctl reload apache2.service\n</code></pre>"},{"location":"Documentations/Linux/web/#site-fonctionnel","title":"Site fonctionnel :","text":""},{"location":"Documentations/Linux/DNS/DNS_Maitre1/","title":"Serveur DNS ma\u00eetre faisant autorit\u00e9","text":""},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#attention","title":"Attention","text":"<p>Puisque vous allez \u00eatre amen\u00e9 \u00e0 modifier des fichiers de configuration pr\u00e9sents dans le dossier <code>/etc</code>, vous devez utiliser etckeeper pour faire du versioning.</p>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#1-verification-prealable","title":"1. V\u00e9rification pr\u00e9alable","text":""},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#mettez-a-jour-votre-serveur","title":"Mettez \u00e0 jour votre serveur","text":"<pre><code>sudo apt update &amp;&amp; sudo apt upgrade\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#installez-le-service-bind-9-et-les-outils-diagnostics-dns","title":"Installez le service Bind 9 et les outils diagnostics DNS","text":"<pre><code>sudo apt install bind9 dnsutils\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#2-definir-les-parametres-reseaux-du-serveur","title":"2. D\u00e9finir les param\u00e8tres r\u00e9seaux du serveur","text":"<pre><code>sudoedit /etc/network/interfaces\n</code></pre> <pre><code># This file describes the network interfaces available on your system\n# and how to activate them. For more information, see interfaces(5).\n\nsource /etc/network/interfaces.d/*\n\n# The loopback network interface\nauto lo\niface lo inet loopback\n\n# The primary network interface\nallow-hotplug ens192\nauto ens192\niface ens192 inet static\naddress 192.36.3.10\nnetmask 255.255.255.0\ngateway 192.36.3.253\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#3-definir-le-serveur-dns-recursif-a-utiliser","title":"3. D\u00e9finir le serveur DNS r\u00e9cursif \u00e0 utiliser","text":"<pre><code>sudoedit /etc/resolv.conf\n</code></pre> <pre><code>nameserver 192.168.3.10\nnameserver 9.9.9.9\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#4-prendre-en-compte-les-modifications-des-parametres-reseaux","title":"4. Prendre en compte les modifications des param\u00e8tres r\u00e9seaux","text":"<pre><code>sudo systemctl restart networking\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#5-configurer-correctement-les-fichiers-etchostname-et-etchosts","title":"5. Configurer correctement les fichiers /etc/hostname et /etc/hosts","text":""},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#etchostname","title":"<code>/etc/hostname</code>","text":"<pre><code>sudoedit /etc/hostname\n</code></pre> <pre><code>ns0\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#etchosts","title":"<code>/etc/hosts</code>","text":"<pre><code>sudoedit /etc/hosts\n</code></pre> <pre><code>127.0.0.1   localhost\n127.0.1.1   ns0.californie.cub.sioplc.fr   ns0\n\n# The following lines are desirable for IPv6 capable hosts\n::1     localhost ip6-localhost ip6-loopback\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#redemarrez-le-serveur-pour-appliquer-le-changement-de-nom","title":"Red\u00e9marrez le serveur pour appliquer le changement de nom","text":"<pre><code>sudo shutdown -r now\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#6-principes-generaux-concernant-bind9-et-le-service-dns","title":"6. Principes g\u00e9n\u00e9raux concernant Bind9 et le service DNS","text":"<ul> <li>Cr\u00e9er dans le r\u00e9pertoire <code>/var/named/</code> ou <code>/var/cache/bind/</code> les zones ad\u00e9quates \u00e0 l\u2019aide d\u2019un fichier <code>db.xxxxxx</code> (ici <code>db.californie.cub.sioplc.fr</code>).</li> <li>Initialiser les zones dans <code>/etc/bind/named.conf.local</code>.</li> <li>G\u00e9rer les options globales dans <code>/etc/bind/named.conf.options</code>.</li> <li>Toujours tester la syntaxe avant red\u00e9marrage.</li> </ul>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#commandes-utiles","title":"Commandes utiles","text":"<pre><code>dig\nhost\nnslookup  # (Windows)\nnamed-checkconf\nnamed-checkzone\nsystemctl stop|start|restart|reload|status bind9\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#7-exemple-de-configuration-dun-serveur-dns-maitre-faisant-autorite","title":"7. Exemple de configuration d'un serveur DNS ma\u00eetre faisant autorit\u00e9","text":""},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#etcbindnamedconf","title":"<code>/etc/bind/named.conf</code>","text":"<pre><code>// This is the primary configuration file for the BIND DNS server named.\n// If you are just adding zones, please do that in /etc/bind/named.conf.local\n\ninclude \"/etc/bind/named.conf.options\";\ninclude \"/etc/bind/named.conf.local\";\ninclude \"/etc/bind/named.conf.default-zones\";\n\n// Ajout du fichier de param\u00e9trage de la journalisation du service BIND\ninclude \"/etc/bind/named.conf.log\";\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#etcbindnamedconfoptions","title":"<code>/etc/bind/named.conf.options</code>","text":"<pre><code>options {\n    directory \"/var/cache/bind\";\n\n    listen-on port 53 { 127.0.0.1; 172.16.3.10; };\n\n    recursion no;\n\n    version none;\n};\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#etcbindnamedconflocal","title":"<code>/etc/bind/named.conf.local</code>","text":"<pre><code>zone \"californie.cub.sioplc.fr\" {\n    type master;\n    allow-transfer { 172.16.3.11; };\n    file \"/var/cache/bind/db.californie.cub.sioplc.fr\";\n};\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#varcachebinddbcaliforniecubsioplcfr","title":"<code>/var/cache/bind/db.californie.cub.sioplc.fr</code>","text":"<pre><code>$TTL 43200 ; 12 heures\n\ncalifornie.cub.sioplc.fr. IN SOA ns0.californie.cub.sioplc.fr. postmaster.californie.cub.sioplc.fr. (\n    2025110101 ; Serial\n    1D ; Refresh\n    1H ; Retry\n    1W ; Expire\n    3H ) ; Negative Cache TTL\n\n; Serveurs DNS faisant autorit\u00e9 sur la zone\ncalifornie.cub.sioplc.fr.  IN  NS  ns0.californie.cub.sioplc.fr.\ncalifornie.cub.sioplc.fr.  IN  NS  ns1.californie.cub.sioplc.fr.\n\n; Correspondances nom \u2194 IP\nns0     IN  A   172.16.3.10\nns1     IN  A   172.16.3.11\nwww     IN  A   172.16.3.2\n\n; Alias (CNAME)\nextranet IN  CNAME  www.californie.cub.sioplc.fr.\n</code></pre> <p>Pensez \u00e0 incr\u00e9menter le num\u00e9ro de s\u00e9rie \u00e0 chaque modification. Exemple : <code>2025110101</code>, <code>2025110102</code>, etc.</p>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#8-mise-en-place-dune-journalisation-des-evenements-du-service-dns","title":"8. Mise en place d\u2019une journalisation des \u00e9v\u00e8nements du service DNS","text":""},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#etcbindnamedconflog","title":"<code>/etc/bind/named.conf.log</code>","text":"<pre><code>logging {\n    channel bind_log {\n        file \"/var/log/bind.log\" versions 3 size 100m;\n        severity info;\n        print-category yes;\n        print-severity yes;\n        print-time yes;\n    };\n\n    category default { bind_log; };\n};\n</code></pre> <p>Cr\u00e9ation du fichier de log :</p> <pre><code>sudo touch /var/log/bind.log\nsudo chown bind:bind /var/log/bind.log\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#9-securisation-avec-apparmor","title":"9. S\u00e9curisation avec AppArmor","text":""},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#autoriser-bind9-a-ecrire-dans-le-fichier-de-log","title":"Autoriser Bind9 \u00e0 \u00e9crire dans le fichier de log","text":"<pre><code>sudoedit /etc/apparmor.d/usr.sbin.named\n</code></pre> <p>Ajouter :</p> <pre><code>/var/log/bind.log rw,\n</code></pre> <p>Recharger la configuration :</p> <pre><code>sudo apparmor_parser -r /etc/apparmor.d/usr.sbin.named\nsudo systemctl restart apparmor\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#10-verification-et-redemarrage-du-service-bind9","title":"10. V\u00e9rification et red\u00e9marrage du service Bind9","text":""},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#verification-de-la-syntaxe","title":"V\u00e9rification de la syntaxe","text":"<pre><code>sudo named-checkconf\nsudo named-checkzone californie.cub.sioplc.fr /var/cache/bind/db.californie.cub.sioplc.fr\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#redemarrage-du-service","title":"Red\u00e9marrage du service","text":"<pre><code>sudo systemctl restart bind9\nsudo systemctl status bind9\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#11-tests-dns","title":"11. Tests DNS","text":""},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#avec-dig","title":"Avec <code>dig</code>","text":"<pre><code>dig @localhost californie.cub.sioplc.fr\ndig @localhost ns0.californie.cub.sioplc.fr\n</code></pre>"},{"location":"Documentations/Linux/DNS/DNS_Maitre1/#avec-host","title":"Avec <code>host</code>","text":"<pre><code>host www.californie.cub.sioplc.fr 127.0.0.1\n</code></pre> <p>Le Serveur DNS faisant autorit\u00e9 de l'agence Californie est d\u00e9sormais fonctionnel.</p>"},{"location":"Documentations/Linux/DNS/recursif/","title":"DNS R\u00e9cursif : Unbound","text":""},{"location":"Documentations/Linux/DNS/recursif/#1-mettre-a-jour-le-systeme","title":"1. Mettre \u00e0 jour le syst\u00e8me","text":"<pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre>"},{"location":"Documentations/Linux/DNS/recursif/#2-installer-unbound","title":"2. Installer Unbound","text":"<pre><code>sudo apt install -y unbound\n</code></pre>"},{"location":"Documentations/Linux/DNS/recursif/#3-creer-une-configuration-personnalisee","title":"3. Cr\u00e9er une configuration personnalis\u00e9e","text":"<p>\u00c9ditez un fichier d\u00e9di\u00e9 :</p> <pre><code>sudo nano /etc/unbound/unbound.conf.d/cub.conf\n</code></pre> <p>Ajoutez le contenu suivant :</p> <pre><code>server:\n    # Interfaces r\u00e9seau \u00e0 \u00e9couter\n    interface: 192.168.3.61\n    interface: 127.0.0.1\n\n    # Contr\u00f4le d'acc\u00e8s par sous-r\u00e9seaux\n    access-control: 192.168.3.0/25 allow\n    access-control: 192.168.3.128/26 allow\n    access-control: 192.168.3.192/28 allow\n    access-control: 127.0.0.0/8 allow\n    access-control: 0.0.0.0/0 refuse\n\n    # S\u00e9curit\u00e9 et confidentialit\u00e9\n    hide-version: yes\n    hide-identity: yes\n\n    # Protocoles\n    do-ip4: yes\n\n    # Verbosit\u00e9 pour le debug\n    verbosity: 3\n</code></pre>"},{"location":"Documentations/Linux/DNS/recursif/#4-verifier-la-configuration","title":"4. V\u00e9rifier la configuration","text":"<p>Avant de red\u00e9marrer, assurez-vous qu\u2019il n\u2019y a pas d\u2019erreurs :</p> <pre><code>sudo unbound-checkconf /etc/unbound/unbound.conf.d/cub.conf\n</code></pre> <ul> <li>Si la commande ne retourne rien, la configuration est correcte.</li> <li>Sinon, corrigez les erreurs signal\u00e9es avant de continuer.</li> </ul>"},{"location":"Documentations/Linux/DNS/recursif/#5-redemarrer-et-activer-le-service","title":"5. Red\u00e9marrer et activer le service","text":"<pre><code>sudo systemctl restart unbound\nsudo systemctl enable unbound\n</code></pre>"},{"location":"Documentations/Linux/DNS/recursif/#6-verification","title":"6. V\u00e9rification","text":"<p>Pour v\u00e9rifier qu\u2019Unbound fonctionne correctement :</p> <pre><code>sudo systemctl status unbound\n</code></pre> <p>Ou tester une requ\u00eate DNS locale :</p> <pre><code>dig @127.0.0.1 example.com\n</code></pre>"},{"location":"Documentations/Windows%20Serveur%202019/RDP/","title":"Liaison s\u00e9curis\u00e9e avec le Bureau \u00e0 Distance (RDP)","text":""},{"location":"Documentations/Windows%20Serveur%202019/RDP/#1-activation-du-bureau-a-distance-sur-le-serveur","title":"1. Activation du Bureau \u00e0 Distance sur le serveur","text":""},{"location":"Documentations/Windows%20Serveur%202019/RDP/#ouvrir-le-panneau-de-configuration","title":"Ouvrir le panneau de configuration","text":"<p>Depuis le tableau de bord du serveur Windows, acc\u00e9dez aux param\u00e8tres syst\u00e8me :</p> <p></p>"},{"location":"Documentations/Windows%20Serveur%202019/RDP/#activer-le-bureau-a-distance","title":"Activer le Bureau \u00e0 Distance","text":"<p>Activez l\u2019option \u201cAutoriser les connexions \u00e0 distance \u00e0 cet ordinateur\u201d :</p> <p></p> <p></p> <p>Cela permet au serveur d\u2019accepter les connexions RDP depuis d\u2019autres postes du r\u00e9seau.</p>"},{"location":"Documentations/Windows%20Serveur%202019/RDP/#2-autoriser-rdp-dans-le-pare-feu","title":"2. Autoriser RDP dans le pare-feu","text":"<p>Si une erreur de connexion appara\u00eet, v\u00e9rifiez que la r\u00e8gle du pare-feu est bien activ\u00e9e. Dans le pare-feu Windows :</p> <ul> <li>Recherchez la r\u00e8gle \u201cBureau \u00e0 distance (RDP - TCP-In)\u201d</li> <li>Activez-la si elle est d\u00e9sactiv\u00e9e.</li> </ul> <p></p> <p>Astuce</p> <p>Vous pouvez aussi l\u2019activer via PowerShell : <pre><code>Enable-NetFirewallRule -DisplayGroup \"Bureau \u00e0 distance\"\n</code></pre></p>"},{"location":"Documentations/Windows%20Serveur%202019/RDP/#3-connexion-depuis-un-poste-windows","title":"3. Connexion depuis un poste Windows","text":""},{"location":"Documentations/Windows%20Serveur%202019/RDP/#ouvrir-lapplication-bureau-a-distance","title":"Ouvrir l\u2019application \u201cBureau \u00e0 distance\u201d","text":"<p>Sur votre poste client, lancez le programme : Menu D\u00e9marrer \u2192 Rechercher \u201cBureau \u00e0 distance\u201d \u2192 Ouvrir</p> <p></p>"},{"location":"Documentations/Windows%20Serveur%202019/RDP/#se-connecter-au-serveur","title":"Se connecter au serveur","text":"<p>Saisissez l\u2019adresse IP ou le nom du serveur puis cliquez sur Connexion. Acceptez le certificat de s\u00e9curit\u00e9 lorsqu\u2019il est demand\u00e9 :</p> <p></p> <p></p>"},{"location":"Documentations/Windows%20Serveur%202019/RDP/#4-verifier-les-autorisations-dacces-utilisateur","title":"4. V\u00e9rifier les autorisations d\u2019acc\u00e8s utilisateur","text":"<p>Pour qu\u2019un utilisateur puisse se connecter en RDP, il doit appartenir \u00e0 l\u2019un de ces groupes :</p> <ul> <li>Administrateurs</li> <li>Utilisateurs du Bureau \u00e0 distance</li> </ul> <p></p> <p>Bonnes pratiques</p> <ul> <li>\u00c9vitez d\u2019utiliser le compte Administrateur directement.</li> <li>Cr\u00e9ez un utilisateur d\u00e9di\u00e9 pour les connexions RDP.</li> <li>Limitez les droits et activez l\u2019audit des connexions.</li> </ul>"},{"location":"Documentations/Windows%20Serveur%202019/RDP/#5-connexion-reussie","title":"5. Connexion r\u00e9ussie","text":"<p>Une fois connect\u00e9, vous avez un acc\u00e8s complet au bureau du serveur distant. Vous pouvez maintenant administrer le serveur comme si vous \u00e9tiez en local, tout en gardant une liaison s\u00e9curis\u00e9e via RDP.</p>"},{"location":"Documentations/Windows%20Serveur%202019/SSH/","title":"Liaison s\u00e9curis\u00e9e avec le Terminal (SSH)","text":""},{"location":"Documentations/Windows%20Serveur%202019/SSH/#1-preparation-et-installation-dopenssh-server","title":"1. Pr\u00e9paration et installation d\u2019OpenSSH Server","text":""},{"location":"Documentations/Windows%20Serveur%202019/SSH/#configuration-reseau","title":"Configuration r\u00e9seau","text":"<p>Avant l\u2019installation, assurez-vous que le serveur dispose d\u2019une configuration r\u00e9seau fonctionnelle :</p> <p></p>"},{"location":"Documentations/Windows%20Serveur%202019/SSH/#installation-dopenssh-server","title":"Installation d\u2019OpenSSH Server","text":"<p>Installez le r\u00f4le OpenSSH Server via le gestionnaire de fonctionnalit\u00e9s Windows :</p> <p></p>"},{"location":"Documentations/Windows%20Serveur%202019/SSH/#2-activation-du-service-openssh-server","title":"2. Activation du service OpenSSH Server","text":"<p>Activez ensuite le service SSH pour permettre les connexions \u00e0 distance :</p> <p></p> <p>V\u00e9rifiez que le service sshd est bien d\u00e9marr\u00e9 et configur\u00e9 pour s\u2019ex\u00e9cuter automatiquement.</p> <p>Astuce</p> <p>Vous pouvez aussi d\u00e9marrer le service via PowerShell : <pre><code>Start-Service sshd\nSet-Service -Name sshd -StartupType 'Automatic'\n</code></pre></p>"},{"location":"Documentations/Windows%20Serveur%202019/SSH/#3-connexion-a-distance-depuis-un-poste-externe","title":"3. Connexion \u00e0 distance depuis un poste externe","text":""},{"location":"Documentations/Windows%20Serveur%202019/SSH/#connexion-depuis-un-poste-linux","title":"Connexion depuis un poste Linux","text":"<p>Ex\u00e9cutez la commande suivante dans un terminal :</p> <pre><code>ssh Administrateur@172.16.53.1\n</code></pre> <p>Entrez ensuite le mot de passe :</p> <pre><code>Administrateur@172.16.53.1's password: 700_buC700_buC\n</code></pre> <p>Une fois connect\u00e9, le terminal affiche :</p> <pre><code>Microsoft Windows [version 10.0.17763.2114]\n(c) 2018 Microsoft Corporation. Tous droits r\u00e9serv\u00e9s.\n\nadministrateur@SERVEURPRIMAIRE C:\\Users\\Administrateur&gt;\n</code></pre> <p>La connexion SSH est op\u00e9rationnelle.</p>"},{"location":"Documentations/Windows%20Serveur%202019/SSH/#4-securisation-du-serveur-ssh","title":"4. S\u00e9curisation du serveur SSH","text":""},{"location":"Documentations/Windows%20Serveur%202019/SSH/#creation-dun-compte-dedie-aux-connexions-ssh","title":"Cr\u00e9ation d\u2019un compte d\u00e9di\u00e9 aux connexions SSH","text":"<p>Pour plus de s\u00e9curit\u00e9, cr\u00e9ez un utilisateur sp\u00e9cialement destin\u00e9 \u00e0 l\u2019acc\u00e8s SSH :</p> <p></p> <p>Exemple de connexion avec ce nouveau compte :</p> <pre><code>ssh adminssh@172.16.53.1\nadminssh@172.16.53.1's password: Cub_Admin_Ssh_007\n</code></pre> <p>Connexion r\u00e9ussie :</p> <pre><code>Microsoft Windows [version 10.0.17763.2114]\n(c) 2018 Microsoft Corporation. Tous droits r\u00e9serv\u00e9s.\n\nadminssh@SERVEURPRIMAIRE C:\\Users\\adminssh&gt;\n</code></pre> <p>Bonnes pratiques</p> <ul> <li>N\u2019utilisez jamais le compte Administrateur pour les connexions SSH.</li> <li>Cr\u00e9ez un compte d\u00e9di\u00e9 et limitez ses permissions.</li> <li>Activez la journalisation des connexions pour suivre l\u2019activit\u00e9 SSH.</li> </ul>"},{"location":"Documentations/Windows%20Serveur%202019/SSH/#desactivation-de-la-connexion-avec-le-compte-administrateur","title":"D\u00e9sactivation de la connexion avec le compte Administrateur","text":"<p>Ouvrez le fichier de configuration SSH :</p> <pre><code>C:\\ProgramData\\ssh\\sshd_config\n</code></pre> <p>Commentez ces deux lignes :</p> <pre><code># Match Group administrators\n# AuthorizedKeysFile __PROGRAMDATA__/ssh/administrators_authorized_keys\n</code></pre> <p>Ajoutez ensuite \u00e0 la fin du fichier :</p> <pre><code>DenyUsers Administrateur\n</code></pre> <p>Red\u00e9marrez le service SSH pour appliquer les changements :</p> <p></p> <p>La connexion au compte Administrateur est d\u00e9sormais bloqu\u00e9e :</p> <pre><code>etudiant@S406-P10-L:~$ ssh Administrateur@172.16.53.1\nPermission denied (publickey,password,keyboard-interactive).\n</code></pre>"},{"location":"Documentations/Windows%20Serveur%202019/SSH/#modification-du-port-par-defaut","title":"Modification du port par d\u00e9faut","text":"<p>Pour renforcer la s\u00e9curit\u00e9, changez le port d\u2019\u00e9coute SSH.</p> <p>Ouvrez \u00e0 nouveau le fichier :</p> <pre><code>C:\\ProgramData\\ssh\\sshd_config\n</code></pre> <p>Modifiez la ligne du port :</p> <pre><code>Port 222\n</code></pre> <p>Ajoutez une r\u00e8gle dans le pare-feu Windows via PowerShell :</p> <pre><code>New-NetFirewallRule -Name sshd -DisplayName 'OpenSSH Server (sshd) - Port 222' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 222\n</code></pre> <p></p> <p>Red\u00e9marrez le service SSH :</p> <pre><code>Restart-Service \"sshd\"\n</code></pre>"},{"location":"Documentations/Windows%20Serveur%202019/SSH/#connexion-avec-le-nouveau-port","title":"Connexion avec le nouveau port","text":"<p>Depuis le poste client, connectez-vous en pr\u00e9cisant le port modifi\u00e9 :</p> <pre><code>ssh -p 222 adminssh@172.16.53.1\nadminssh@172.16.53.1's password: \n</code></pre> <p>Connexion r\u00e9ussie :</p> <pre><code>Microsoft Windows [version 10.0.17763.2114]\n(c) 2018 Microsoft Corporation. Tous droits r\u00e9serv\u00e9s.\n\nadminssh@SERVEURPRIMAIRE C:\\Users\\adminssh&gt;\n</code></pre>"},{"location":"Documentations/Windows%20Serveur%202019/beggining/","title":"Pr\u00e9paration de base d'un serveur Windows","text":""},{"location":"Documentations/Windows%20Serveur%202019/beggining/#1-preparation-initiale-du-serveur","title":"1. Pr\u00e9paration initiale du serveur","text":""},{"location":"Documentations/Windows%20Serveur%202019/beggining/#11-execution-de-sysprep","title":"1.1 Ex\u00e9cution de Sysprep","text":"<p>L\u2019outil Sysprep permet de g\u00e9n\u00e9raliser le syst\u00e8me, c\u2019est-\u00e0-dire de r\u00e9initialiser l\u2019identifiant unique (SID) du serveur. Cela est essentiel pour assurer une communication correcte entre plusieurs serveurs dans un m\u00eame r\u00e9seau.</p> <pre><code>%WINDIR%\\system32\\sysprep\\sysprep.exe /generalize /shutdown /oobe\n</code></pre> <p>Pour v\u00e9rifier le nouveau SID g\u00e9n\u00e9r\u00e9 :</p> <pre><code>whoami /user\n</code></pre> <p></p> <p>Information</p> <p>Chaque serveur doit poss\u00e9der un SID unique pour \u00e9viter les conflits dans l\u2019Active Directory</p>"},{"location":"Documentations/Windows%20Serveur%202019/beggining/#2-configuration-du-nom-du-serveur","title":"2. Configuration du nom du serveur","text":"<p>Pour renommer le serveur :</p> <ol> <li>Ouvrez le panneau de gestion du serveur.</li> <li>Cliquez sur Modifier les param\u00e8tres syst\u00e8me.</li> <li>Dans la section \u201cNom de l\u2019ordinateur\u201d, cliquez sur Modifier.</li> <li>Entrez le nouveau nom (exemple : <code>SRV-PRIMAIRE</code>) puis red\u00e9marrez la machine.</li> </ol> <p></p> <p>Information</p> <p>Un red\u00e9marrage est obligatoire pour appliquer le nouveau nom.</p>"},{"location":"Documentations/Windows%20Serveur%202019/beggining/#3-securisation-du-mot-de-passe-administrateur","title":"3. S\u00e9curisation du mot de passe administrateur","text":"<p>Par mesure de s\u00e9curit\u00e9, modifiez le mot de passe du compte Administrateur.</p> <p>Information</p> <p>Dans le cadre de la situation, le mot de passe d\u00e9fini est : <code>700_buC700_buC</code></p> <p></p> <p>Recommandation de l'ANSSI</p> <ul> <li>Au moins 12 caract\u00e8res</li> <li>Des majuscules / minuscules</li> <li>Des chiffres</li> <li>Des caract\u00e8res sp\u00e9ciaux</li> </ul>"},{"location":"Documentations/Windows%20Serveur%202019/beggining/#4-configuration-reseau-vlan-et-ip","title":"4. Configuration r\u00e9seau \u2013 VLAN et IP","text":""},{"location":"Documentations/Windows%20Serveur%202019/beggining/#41-affectation-au-bon-vlan","title":"4.1 Affectation au bon VLAN","text":"<p>Dans l\u2019hyperviseur, v\u00e9rifiez que la machine virtuelle est bien connect\u00e9e au VLAN d\u00e9di\u00e9 \u00e0 votre r\u00e9seau d\u2019administration.</p> <p></p>"},{"location":"Documentations/Windows%20Serveur%202019/beggining/#42-configuration-ip-du-serveur","title":"4.2 Configuration IP du serveur","text":"<p>Renseignez une adresse IP statique compatible avec votre plan d\u2019adressage. Exemple de configuration :</p> <p></p> <p>Information</p> <p>Une IP fixe est indispensable pour tous les r\u00f4les serveurs (DNS, AD DS, DHCP\u2026).</p>"},{"location":"Documentations/Windows%20Serveur%202019/beggining/#43-configuration-du-poste-client-de-test","title":"4.3 Configuration du poste client de test","text":"<p>Pour tester la connectivit\u00e9, configurez une machine cliente Windows 10 avec une IP dans le m\u00eame r\u00e9seau :</p> <p></p> <p>Dans VirtualBox, la carte r\u00e9seau doit \u00eatre en mode pont afin de rejoindre le m\u00eame r\u00e9seau physique :</p> <p></p>"},{"location":"Documentations/Windows%20Serveur%202019/beggining/#44-test-de-connectivite-icmp","title":"4.4 Test de connectivit\u00e9 (ICMP)","text":"<p>Sur le serveur, activez la r\u00e8gle ICMP entrante dans le pare-feu pour autoriser le ping :</p> <p></p> <p>Apr\u00e8s connexion physique au port 13, le ping entre le client et le serveur est fonctionnel :</p> <p></p> <p>Bonne configuration</p> <p>La communication r\u00e9seau est \u00e9tablie : le serveur est pr\u00eat pour la configuration des r\u00f4les Active Directory, DNS et DHCP.</p>"},{"location":"Documentations/Windows%20Serveur%202019/beggining/#5-verifications-finales","title":"5. V\u00e9rifications finales","text":"<p>V\u00e9rification</p> <ul> <li>Sysprep ex\u00e9cut\u00e9 et SID unique</li> <li>Nom du serveur conforme</li> <li>Mot de passe administrateur modifi\u00e9</li> <li>IP statique configur\u00e9e</li> <li>Test ICMP fonctionnel</li> </ul>"},{"location":"Infrastructure/planDAdressage/","title":"Plan d'adressage","text":""},{"location":"Infrastructure/planDAdressage/#vlan-53-production","title":"VLAN 53 \u2014 Production","text":"<p>60 \u00d7 2 = 120 appareils 2\u2077 - 2 = 126 32 - 7 = 25 CIDR /25</p> Octet 1 Octet 2 Octet 3 Octet 4 Adresse d\u00e9cimale @R\u00e9seau 1100.0000 1010.1000 0000.0011 0000.0000 192.168.3.0 Masque 1111.1111 1111.1111 1111.1111 1000.0000 255.255.255.128 @Passerelle 1100.0000 1010.1000 0000.0011 0111.1110 192.168.3.126 @Diffusion 1100.0000 1010.1000 0000.0011 0111.1111 192.168.3.127"},{"location":"Infrastructure/planDAdressage/#vlan-10-client-1","title":"VLAN 10 \u2014 Client 1","text":"<p>16 \u00d7 2 = 32 appareils 2\u2076 - 2 = 62 32 - 6 = 26 CIDR /27</p> Octet 1 Octet 2 Octet 3 Octet 4 Adresse d\u00e9cimale @R\u00e9seau 1100.0000 1010.1000 0000.0011 1000.0000 192.168.3.128 Masque 1111.1111 1111.1111 1111.1111 1100.0000 255.255.255.192 @Passerelle 1100.0000 1010.1000 0000.0011 1011.1110 192.168.3.190 @Diffusion 1100.0000 1010.1000 0000.0011 1011.1111 192.168.3.191"},{"location":"Infrastructure/planDAdressage/#vlan-20-administration-systeme-et-reseaux","title":"VLAN 20 \u2014 Administration syst\u00e8me et r\u00e9seaux","text":"<p>3 \u00d7 2 = 6 appareils 2\u2074 - 2 = 14 32 - 4 = 28 CIDR /28</p> Octet 1 Octet 2 Octet 3 Octet 4 Adresse d\u00e9cimale @R\u00e9seau 1100.0000 1010.1000 0000.0011 1100.0000 192.168.3.192 Masque 1111.1111 1111.1111 1111.1111 1111.0000 255.255.255.240 @Passerelle 1100.0000 1010.1000 0000.0011 1100.1110 192.168.3.206 @Diffusion 1100.0000 1010.1000 0000.0011 1100.1111 192.168.3.207"},{"location":"Infrastructure/planDeCablage/","title":"Sch\u00e9ma de cablage","text":""},{"location":"Infrastructure/schemas/","title":"Sch\u00e9mas Pysique et Logique","text":""},{"location":"Infrastructure/schemas/#schemas-physique-de-cub","title":"Sch\u00e9mas Physique de CUB","text":""},{"location":"Infrastructure/schemas/#schemas-logique-de-cub","title":"Sch\u00e9mas Logique de CUB","text":""},{"location":"Infrastructure/tableRoutageNat/","title":"Les tables de routage et Nat","text":""},{"location":"Infrastructure/tableRoutageNat/#tables-de-routage","title":"Tables de routage","text":""},{"location":"Infrastructure/tableRoutageNat/#commutateur-de-niveau-3","title":"Commutateur de niveau 3","text":"Destination Masque Passerelle Interface Type 192.168.3.0 255.255.255.128 192.168.3.126 192.168.3.126 Connect\u00e9 192.168.3.128 255.255.255.192 192.168.3.190 192.168.3.190 Connect\u00e9 192.168.3.192 255.255.255.240 192.168.3.206 192.168.3.206 Connect\u00e9 192.168.33.248 255.255.255.240 192.168.33.253 192.168.33.253 Connect\u00e9 0.0.0.0 0.0.0.0 192.168.33.254 192.168.33.253 Statique"},{"location":"Infrastructure/tableRoutageNat/#firewall-stormsheld","title":"Firewall Stormsheld","text":"Destination Masque Passerelle Interface Type 192.36.3.0 255.255.255.0 192.36.3.254 192.36.3.254 Connect\u00e9 192.168.33.248 255.255.255.240 192.168.33.254 192.168.33.254 Connect\u00e9 192.36.253.0 255.255.255.0 192.36.253.30 192.36.253.30 Connect\u00e9 192.168.3.0 255.255.255.0 192.168.33.253 192.168.33.254 Statique 0.0.0.0 0.0.0.0 192.36.253.254 192.36.253.30 Statique"},{"location":"Infrastructure/tableRoutageNat/#table-de-nat","title":"Table de NAT","text":"IP Source (avant) Port Source (avant) IP Destination (avant) Port Distant (avant) IP Source (apr\u00e8s) Port Source (apr\u00e8s) IP Destination (apr\u00e8s) Port Distant (apr\u00e8s) 192.168.3.0/24 * * * 192.36.253.30/24 * * *"},{"location":"Infrastructure/Configurations/SwitchLv2/","title":"Configuration du SwitchLv2","text":"<pre><code>version 15.0\nno service pad\nservice timestamps debug datetime msec\nservice timestamps log datetime msec\nno service password-encryption\n!\nhostname SwitchLv2CUB\n!\nboot-start-marker\nboot-end-marker\n!\n!\nusername etudiant privilege 15 secret 4 XJs1kDT984d4u/RcgM1oWYsonq4S11mG8xa9fZJ0J8Q\nno aaa new-model\nsystem mtu routing 1500\n!\n!\nip domain-name btssio3.lan\n!         \n!\ncrypto pki trustpoint TP-self-signed-2716685696\n enrollment selfsigned\n subject-name cn=IOS-Self-Signed-Certificate-2716685696\n revocation-check none\n rsakeypair TP-self-signed-2716685696\n!\n!\ncrypto pki certificate chain TP-self-signed-2716685696\n certificate self-signed 01\n  3082022B 30820194 A0030201 02020101 300D0609 2A864886 F70D0101 05050030 \n  31312F30 2D060355 04031326 494F532D 53656C66 2D536967 6E65642D 43657274 \n  69666963 6174652D 32373136 36383536 3936301E 170D3933 30333031 30303037 \n  35345A17 0D323030 31303130 30303030 305A3031 312F302D 06035504 03132649 \n  4F532D53 656C662D 5369676E 65642D43 65727469 66696361 74652D32 37313636 \n  38353639 3630819F 300D0609 2A864886 F70D0101 01050003 818D0030 81890281 \n  81009FC2 CAEFDDC6 5024C601 7CFA798A D13ED553 E4397D52 065857C9 3DA48DEE \n  BBF9DC98 CB55255B 268D3F89 E691F200 C2694FB9 028927BC 8F997AC9 F9FA30B3 \n  06F7D7A2 3493D72C BCDEEC1F CF214B1A 809F36C6 9599B223 38170A4D 6A01E02C \n  1832117D ED79F3BE 52A8F487 AC1F826F E4081FC7 0A60D99E 3358F0CD B080F425 \n  43930203 010001A3 53305130 0F060355 1D130101 FF040530 030101FF 301F0603 \n  551D2304 18301680 14ED765D CE7B7A30 F7D2FA7A 017C9C64 042B5029 45301D06 \n  03551D0E 04160414 ED765DCE 7B7A30F7 D2FA7A01 7C9C6404 2B502945 300D0609 \n  2A864886 F70D0101 05050003 81810031 CFD2019A 5999BDB6 60770031 65BB4E7A \n  73DE6E46 FB3619BC 608AFA7C FF13E2D9 0DE7234F DB7AA269 23612F13 213F54CA \n  08870CD6 C5ACF23D A64370BA 21CAAA18 45D220A3 E5E56522 A9F1A748 11408C31 \n  B32C4D56 38E69882 9A3177AC AC57E423 ECBD2B28 EE41AD9A C28CA2F9 E54D0F0C \n  9E195FDE 01EA4EB7 DE454F69 9688E3\n        quit\n!\n!\n!\n!\n!\nspanning-tree mode pvst\nspanning-tree extend system-id\n!\nvlan internal allocation policy ascending\n!\nip ssh version 2\n!\n!\n!\n!\n!\ninterface FastEthernet0/1\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/2\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/3\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/4\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/5\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/6\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/7\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/8\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/9\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/10\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/11\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/12\n switchport access vlan 10\n switchport mode access\n!\ninterface FastEthernet0/13\n!\ninterface FastEthernet0/14\n!\ninterface FastEthernet0/15\n!\ninterface FastEthernet0/16\n!\ninterface FastEthernet0/17\n!\ninterface FastEthernet0/18\n!\ninterface FastEthernet0/19\n!\ninterface FastEthernet0/20\n!\ninterface FastEthernet0/21\n!\ninterface FastEthernet0/22\n!\ninterface FastEthernet0/23\n!\ninterface FastEthernet0/24\n!\ninterface FastEthernet0/25\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/26\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/27\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/28\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/29\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/30\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/31\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/32\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/33\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/34\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/35\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/36\n switchport access vlan 20\n switchport mode access\n!\ninterface FastEthernet0/37\n!\ninterface FastEthernet0/38\n!\ninterface FastEthernet0/39\n!\ninterface FastEthernet0/40\n!\ninterface FastEthernet0/41\n!\ninterface FastEthernet0/42\n!\ninterface FastEthernet0/43\n!\ninterface FastEthernet0/44\n!\ninterface FastEthernet0/45\n!\ninterface FastEthernet0/46\n!\ninterface FastEthernet0/47\n switchport trunk allowed vlan 10,20,53\n switchport mode trunk\n!\ninterface FastEthernet0/48\n!\ninterface GigabitEthernet0/1\n!\ninterface GigabitEthernet0/2\n!\ninterface Vlan1\n no ip address\n shutdown\n!\ninterface Vlan20\n ip address 192.168.3.205 255.255.255.240\n!\nip http server\nip http secure-server\n!\n!\nline con 0\nline vty 0 4\n login local\n transport input ssh\nline vty 5 15\n login\n!\nend\n</code></pre>"},{"location":"Infrastructure/Configurations/SwitchLv3/","title":"Configuration du SwitchLv3","text":"<pre><code>version 17.6\nservice timestamps debug datetime msec\nservice timestamps log datetime msec\n! Call-home is enabled by Smart-Licensing.\nservice call-home\nplatform punt-keepalive disable-kernel-core\n!\nhostname SwitchLv3CUB\n!\n!\nvrf definition Mgmt-vrf\n !\n address-family ipv4\n exit-address-family\n !\n address-family ipv6\n exit-address-family\n!\n!         \n!\n!\n!\nno aaa new-model\nswitch 1 provision c9200l-24t-4g\n!\n!\n!\n!\n!\n!\n!\n!\n!\nip routing\n!\n!\n!\n!\nlogin on-success log\n!\ncrypto pki trustpoint SLA-TrustPoint\n enrollment pkcs12\n revocation-check crl\n!\ncrypto pki trustpoint TP-self-signed-3639644206\n enrollment selfsigned\n subject-name cn=IOS-Self-Signed-Certificate-3639644206\n revocation-check none\n rsakeypair TP-self-signed-3639644206\n!\n!\ncrypto pki certificate chain SLA-TrustPoint\n certificate ca 01\n  30820321 30820209 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030 \n  32310E30 0C060355 040A1305 43697363 6F312030 1E060355 04031317 43697363 \n  6F204C69 63656E73 696E6720 526F6F74 20434130 1E170D31 33303533 30313934 \n  3834375A 170D3338 30353330 31393438 34375A30 32310E30 0C060355 040A1305 \n  43697363 6F312030 1E060355 04031317 43697363 6F204C69 63656E73 696E6720 \n  526F6F74 20434130 82012230 0D06092A 864886F7 0D010101 05000382 010F0030 \n  82010A02 82010100 A6BCBD96 131E05F7 145EA72C 2CD686E6 17222EA1 F1EFF64D \n  CBB4C798 212AA147 C655D8D7 9471380D 8711441E 1AAF071A 9CAE6388 8A38E520 \n  1C394D78 462EF239 C659F715 B98C0A59 5BBB5CBD 0CFEBEA3 700A8BF7 D8F256EE \n  4AA4E80D DB6FD1C9 60B1FD18 FFC69C96 6FA68957 A2617DE7 104FDC5F EA2956AC \n  7390A3EB 2B5436AD C847A2C5 DAB553EB 69A9A535 58E9F3E3 C0BD23CF 58BD7188 \n  68E69491 20F320E7 948E71D7 AE3BCC84 F10684C7 4BC8E00F 539BA42B 42C68BB7 \n  C7479096 B4CB2D62 EA2F505D C7B062A4 6811D95B E8250FC4 5D5D5FB8 8F27D191 \n  C55F0D76 61F9A4CD 3D992327 A8BB03BD 4E6D7069 7CBADF8B DF5F4368 95135E44 \n  DFC7C6CF 04DD7FD1 02030100 01A34230 40300E06 03551D0F 0101FF04 04030201 \n  06300F06 03551D13 0101FF04 05300301 01FF301D 0603551D 0E041604 1449DC85 \n  4B3D31E5 1B3E6A17 606AF333 3D3B4C73 E8300D06 092A8648 86F70D01 010B0500 \n  03820101 00507F24 D3932A66 86025D9F E838AE5C 6D4DF6B0 49631C78 240DA905 \n  604EDCDE FF4FED2B 77FC460E CD636FDB DD44681E 3A5673AB 9093D3B1 6C9E3D8B \n  D98987BF E40CBD9E 1AECA0C2 2189BB5C 8FA85686 CD98B646 5575B146 8DFC66A8 \n  467A3DF4 4D565700 6ADF0F0D CF835015 3C04FF7C 21E878AC 11BA9CD2 55A9232C \n  7CA7B7E6 C1AF74F6 152E99B7 B1FCF9BB E973DE7F 5BDDEB86 C71E3B49 1765308B \n  5FB0DA06 B92AFE7F 494E8A9E 07B85737 F3A58BE1 1A48A229 C37C1E69 39F08678 \n  80DDCD16 D6BACECA EEBC7CF9 8428787B 35202CDC 60E4616A B623CDBD 230E3AFB \n  418616A9 4093E049 4D10AB75 27E86F73 932E35B5 8862FDAE 0275156F 719BB2F0 \n  D697DF7F 28\n        quit\ncrypto pki certificate chain TP-self-signed-3639644206\n certificate self-signed 01\n  30820330 30820218 A0030201 02020101 300D0609 2A864886 F70D0101 05050030 \n  31312F30 2D060355 04031326 494F532D 53656C66 2D536967 6E65642D 43657274 \n  69666963 6174652D 33363339 36343432 3036301E 170D3235 31323032 31323132 \n  30325A17 0D333531 32303231 32313230 325A3031 312F302D 06035504 03132649 \n  4F532D53 656C662D 5369676E 65642D43 65727469 66696361 74652D33 36333936 \n  34343230 36308201 22300D06 092A8648 86F70D01 01010500 0382010F 00308201 \n  0A028201 0100A5EC 28452167 ED3B3DEC 43C78714 15B0E36B DEB35A76 B0BC9979 \n  39AEF5E4 0EB1C186 A5CEB022 95B74B86 A5121452 DEC92814 87BC245B B3C0F82E \n  EF9339D7 52B54907 C180E636 95332F2C DA199BF2 0CAE5444 A6E54871 AEDF7E98 \n  380B2FDF 02FD89F5 686F09AF DF854E73 35EFBE71 03B7E838 A1A17D9E 285A1AC5 \n  D0EFD1FA 3D160987 3CC62F3D A2515802 52712404 87AF5AEB 71382F47 83056008 \n  FA154DCE F1B2E6AD 4F6FAAA5 3DE7A811 011EB4A7 67C0E336 8A8A4789 8F20A10D \n  517EC52B 79981C56 FE9F4D41 24B06A2A 5E403C80 CAE13DCC 5D4D45DC 8D115D7D \n  53C4B7ED 350386DF D6FAF307 F89C069D A9FFDFDE 5AF8A648 7220C285 EEDC74E2 \n  95CDB3AB 55D10203 010001A3 53305130 0F060355 1D130101 FF040530 030101FF \n  301F0603 551D2304 18301680 141837FB 40A834B6 98823A62 72A8F77B 15BF0F5D \n  B1301D06 03551D0E 04160414 1837FB40 A834B698 823A6272 A8F77B15 BF0F5DB1 \n  300D0609 2A864886 F70D0101 05050003 82010100 4E6C85B0 AC2A7635 E2D887FC \n  F3A602DB CB6E3F2C 5B186CFA 2EE278F6 49D55355 E2AB9217 9C3B2004 352689BD \n  E81E0CE4 94C02292 F17331EA 5F673E29 243DD606 93C8671C 4AFF5154 B39D83AC \n  01CE46E2 36A35866 2EAF82E2 6C499B63 CFE534A1 48705FEA 72E3632E 4D9F1EF7 \n  217B1623 9D55FF70 F70F128C 03A61D75 FEFB612A 76FD1E67 817FC050 DC283E69 \n  743FBF6B FB55C507 CDAF6552 1922F9D9 C35C2E30 D3EDCE6D BE84E57A 599C4393 \n  D45C8272 2F4AD7C5 302D34E3 DF8A28EB BD5AABE6 13FEFD6A A49E567D 5DBE310E \n  65BCFDA5 399D821C 4A24A8BD 9227B45D DAC49F3C 9EEC282B 926EB0E4 CEE5E45A \n  EFE4D42C 731F5F84 7892A4DF 2412CF2B AEDC3CBB\n        quit\n!\nlicense boot level network-essentials addon dna-essentials\n!\n!\ndiagnostic bootup level minimal\n!\nspanning-tree mode rapid-pvst\nspanning-tree extend system-id\nmemory free low-watermark processor 10626\n!\n!\nredundancy\n mode sso\n!\n!\ntransceiver type all\n monitoring\n!\n!\nclass-map match-any system-cpp-police-ewlc-control\n  description EWLC Control \nclass-map match-any system-cpp-police-topology-control\n  description Topology control\nclass-map match-any system-cpp-police-sw-forward\n  description Sw forwarding, L2 LVX data packets, LOGGING, Transit Traffic\nclass-map match-any system-cpp-default\n  description EWLC data, Inter FED Traffic \nclass-map match-any system-cpp-police-sys-data\n  description Openflow, Exception, EGR Exception, NFL Sampled Data, RPF Failed\nclass-map match-any system-cpp-police-punt-webauth\n  description Punt Webauth\nclass-map match-any system-cpp-police-l2lvx-control\n  description L2 LVX control packets\nclass-map match-any system-cpp-police-forus\n  description Forus Address resolution and Forus traffic\nclass-map match-any system-cpp-police-multicast-end-station\n  description MCAST END STATION\nclass-map match-any system-cpp-police-high-rate-app\n  description High Rate Applications \nclass-map match-any system-cpp-police-multicast\n  description MCAST Data\nclass-map match-any system-cpp-police-l2-control\n  description L2 control\nclass-map match-any system-cpp-police-dot1x-auth\n  description DOT1X Auth\nclass-map match-any system-cpp-police-data\n  description ICMP redirect, ICMP_GEN and BROADCAST\nclass-map match-any system-cpp-police-stackwise-virt-control\n  description Stackwise Virtual OOB\nclass-map match-any non-client-nrt-class\nclass-map match-any system-cpp-police-routing-control\n  description Routing control and Low Latency\nclass-map match-any system-cpp-police-protocol-snooping\n  description Protocol snooping\nclass-map match-any system-cpp-police-dhcp-snooping\n  description DHCP snooping\nclass-map match-any system-cpp-police-ios-routing\n  description L2 control, Topology control, Routing control, Low Latency\nclass-map match-any system-cpp-police-system-critical\n  description System Critical and Gold Pkt\nclass-map match-any system-cpp-police-ios-feature\n  description ICMPGEN,BROADCAST,ICMP,L2LVXCntrl,ProtoSnoop,PuntWebauth,MCASTData,Transit,DOT1XAuth,Swfwd,LOGGING,L2LVXData,ForusTraffic,ForusARP,McastEndStn,Openflow,Exception,EGRExcption,d\n!\npolicy-map system-cpp-policy\n!\n! \n!\n!\n!         \n!\n!\n!\n!\n!\n!\n!\n!\n!\ninterface GigabitEthernet0/0\n vrf forwarding Mgmt-vrf\n no ip address\n shutdown\n!\ninterface GigabitEthernet1/0/1\n switchport access vlan 53\n switchport trunk allowed vlan 53\n switchport mode access\n!\ninterface GigabitEthernet1/0/2\n switchport access vlan 53\n switchport trunk allowed vlan 53\n switchport mode access\n!\ninterface GigabitEthernet1/0/3\n switchport access vlan 53\n switchport trunk allowed vlan 53\n switchport mode access\n!\ninterface GigabitEthernet1/0/4\n switchport access vlan 53\n switchport trunk allowed vlan 53\n switchport mode access\n!\ninterface GigabitEthernet1/0/5\n switchport access vlan 53\n switchport trunk allowed vlan 53\n switchport mode access\n!\ninterface GigabitEthernet1/0/6\n switchport access vlan 53\n switchport trunk allowed vlan 53\n switchport mode access\n!\ninterface GigabitEthernet1/0/7\n switchport access vlan 53\n switchport trunk allowed vlan 53\n switchport mode access\n!\ninterface GigabitEthernet1/0/8\n switchport access vlan 53\n switchport trunk allowed vlan 53\n switchport mode access\n!\ninterface GigabitEthernet1/0/9\n!\ninterface GigabitEthernet1/0/10\n!\ninterface GigabitEthernet1/0/11\n!\ninterface GigabitEthernet1/0/12\n!\ninterface GigabitEthernet1/0/13\n!\ninterface GigabitEthernet1/0/14\n!\ninterface GigabitEthernet1/0/15\n!\ninterface GigabitEthernet1/0/16\n!\ninterface GigabitEthernet1/0/17\n!\ninterface GigabitEthernet1/0/18\n!\ninterface GigabitEthernet1/0/19\n!\ninterface GigabitEthernet1/0/20\n!\ninterface GigabitEthernet1/0/21\n!\ninterface GigabitEthernet1/0/22\n!\ninterface GigabitEthernet1/0/23\n switchport access vlan 33\n switchport mode access\n!\ninterface GigabitEthernet1/0/24\n switchport trunk allowed vlan 10,20,53\n switchport mode trunk\n!\ninterface GigabitEthernet1/1/1\n!         \ninterface GigabitEthernet1/1/2\n!\ninterface GigabitEthernet1/1/3\n!\ninterface GigabitEthernet1/1/4\n!\ninterface Vlan1\n ip address 172.16.1.23 255.255.255.0\n shutdown\n!\ninterface Vlan10\n ip address 192.168.3.190 255.255.255.192\n ip helper-address 192.168.3.2\n ip helper-address 192.168.3.1\n ip helper-address 192.168.3.3\n!\ninterface Vlan20\n ip address 192.168.3.206 255.255.255.240\n ip helper-address 192.168.3.2\n ip helper-address 192.168.3.1\n ip helper-address 192.168.3.3\n!\ninterface Vlan33\n ip address 192.168.33.253 255.255.255.240\n ip helper-address 192.168.3.2\n!\ninterface Vlan53\n ip address 192.168.3.126 255.255.255.128\n ip helper-address 192.168.3.2\n!\nip forward-protocol nd\nip http server\nip http authentication local\nip http secure-server\nip route 0.0.0.0 0.0.0.0 192.168.33.254\nip ssh version 2\n!\n!\n!\n!\ncontrol-plane\n service-policy input system-cpp-policy\n!\n!\nline con 0\n stopbits 1\nline aux 0\nline vty 0 4\n login local\n transport input ssh\nline vty 5 15\n login\n transport input ssh\n!\ncall-home\n ! If contact email address in call-home is configured as sch-smart-licensing@cisco.com\n ! the email address configured in Cisco Smart License Portal will be used as contact email address to send SCH notifications.\n contact-email-addr sch-smart-licensing@cisco.com\n profile \"CiscoTAC-1\"\n  active\n  destination transport-method http\n!\n!\n!\n!\n!\n!         \nend\n</code></pre>"}]}